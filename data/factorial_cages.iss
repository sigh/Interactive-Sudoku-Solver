# Puzzle: Factorial Cages
# https://logic-masters.de/Raetselportal/Raetsel/zeigen.php?id=000JC4
#
# Generated with the following sandbox script:
#
# let base = `.Sum~~R8C1~R8C2~R8C3~R9C1~R9C2~R9C3~R9C4~R9C5~R9C6~R9C7.Sum~~R7C1~R7C2~R7C3~R7C4~R8C4~R8C5~R8C6.Sum~~R6C4~R6C5~R7C5~R7C6~R7C7~R8C7.Sum~~R4C7~R5C7~R5C6~R6C6~R6C7~R6C8~R5C8~R7C8~R8C8.Sum~~R3C8~R3C9~R4C9~R5C9~R6C9~R7C9~R8C9~R9C9.Sum~~R2C9~R2C8~R2C7~R2C6~R3C6~R4C6.Sum~~R1C8~R1C7~R1C6~R1C5~R2C5~R3C5~R3C4~R4C4~R4C3.Sum~~R1C1~R2C1.Sum~~R1C3~R1C2~R2C2~R2C3~R3C2~R4C2~R4C1~R3C1~R5C1`;
#
# function factorial(n) {
#   let f = 1;
#   for (let i = 2; i <= n; i++) f = f * i;
#   return f;
# };
#
# function factorialCageNFA(cageSize) {
#   let target = factorial(cageSize);
#   return NFA.encodeSpec({
#     startState: 1,
#     transition: (state, value) => {
#       if (state > target) return;
#       return state * value;
#     },
#     accept: state => state === target,
#   }, 9);
# }
#
# function factorialCage(cells) {
#   return new NFA(factorialCageNFA(cells.length),
#     `${cells.length} factorial cage`, ...cells
#   );
# }
#
# const constraints = parseConstraint(base);
# return constraints.map(c => {
#   if (c.type === 'Sum') {
#     return factorialCage(c.cells);
#   }
#   return c;
# });
.NFA~AjFAGhA~_2%20factorial%20cage~R1C1~R2C1
.NFA~UgIW_AIZCmOgAh34iGPvEUr8ZkY4mU_IfEeyVry753M1r82Eyyqk3PGU6MTaEqWxNpUx7Q2pjYItb4OCbGuCLQgNwUW-DgguDgxWNLNG8qMu2TztergrRtQLUMFtUInvVwR_iSqaYr86feFRfq8Ku1--5nqz1fzK9PvL-z1a8A~_6%20factorial%20cage~R6C4~R6C5~R7C5~R7C6~R7C7~R8C7~~R2C9~R2C8~R2C7~R2C6~R3C6~R4C6
.NFA~VgEF_wAgxBRhyCQCD_whBiOdq3Cn-GMTt0VY7fxCNnO3bS_eLz13vc8Y_xtindy739-PXZbdfAbdyHHXn4Dm2SUWYac2yizmlTy2Wce2syzGm10E2aqsuiUzj0ESieokQ0FEwmikmEUgQGmCQVAU2qsiwkG1kUmUWuwymi2GUwQWymCy2m0GFCW2gozVXH6YTzu6-dUfFZ3qaqI0Cq-fRJN4IYo5EYrDJMkN4pEZ0pPHNPKmFZEpQLKDBZpQRPPKmCRaFJaLTRMoZ6qEFJ9_XbfBnhCqv7LzcNFYp_bBhDrEtr7s9NcY11_fgrFitIP8IlpMkVfjkxOzKL8p2ZU9fnrjHlMwr9MV8mJ5frHlNOyf9nS3-DsHfvw1U3jQb-Km6EMvfz3u9xnS07-tzOGtKrf29xTVq2A~_7%20factorial%20cage~R7C1~R7C2~R7C3~R7C4~R8C4~R8C5~R8C6
.NFA~WgCBf8ACBhAoYOIEgED_wQQMIu2p6gU_wYYTavCqCn_hBFpRfU0VQv3hbt6_bpKxj_DWhSm2LprN-Hn0KNKmtG_8QoUqlaxauHNsSKFjBo5tihY5MhHtsWOHp0RBljEydGRTY1CiRkm2OHkCJIm2x5AmfNFC2QJlEBtlkT6A4VTZI0bOFimTKFSxRKGS5DKmTATLFzARLgQGYAkEyBTZo2WOlw2bLFzyLOHTxhFnTxgCCzxgCyz6AqdMktAVMnk2hREkhpNoiRpKbRaNIlOItIlOHUWlOHTzLTJyKQ-y05E-lQf9QqWLpkl8vHv9SsHSZo9-wv6pdJXzmEAh71cybOlQWJF_rJI9hKIQmW_Wvn8CDCZkruuXsGLJmTqq9k8aFDuwZE3pRrZ2Lx67bFSqyKO283ZtGrZuWirRu5Ljdq3LOi8nbOXTgwFW5dwBXAGCuXAETunBgCRXZlxRXjtyZM712VMut--gQmcaG0NL9_CJQ45prP4DOG0kNTevgxo8iI2OL-FDNNYhtuP4bU23illfEinXR5wL4ro84Ma-NIiNork6r48Q5FOupfIbRXLo8f5LAgylk4bvlSz71BEdm-W9QOysX3zJ0pjLjPD7vmyiMs_He2-cxlvHshBv59Gmtr1HyFf0KY2pYQv9_RW1H1l_ARa-lXsWasFGv6dRC_qooS_qP0UKsShq-rWSR0sRX1o6WIci6-vZqwa0ZIr7FVHWSR9fZg1o0eQlf9pSLWXB1SS77dxNNT1ZTvuTU8ojWl--7ftq7leYmd962MuJrE3331dyZNszk4A~_8%20factorial%20cage~R3C8~R3C9~R4C9~R5C9~R6C9~R7C9~R8C9~R9C9
.NFA~XgBAX_AAIDBAUGBwgJAID_wIEBgidmo9oCv-BgwTNTwVINIX_wQImmifaZFqDPeCzs9Pzck1hv_BpoKaZsMk2wO34PHyEjJSbaH_8IaGlqa2xtbhD_hIUFhgaHB4gI_8KDA4QZWJXMBJ_hYcIsTMJLBj_wwQYjBnMVkyE_eGsrMzsa0Zij_DmISMWMTWzTfh6usLK0tmor_xAwMTIzNDU2Fm2IiQmKCos2xITFi4pF22JiwuXlQwyxQuLysZTYqUlRWNNsWFxgZGhtti4wNk5EOFsYGxwoI2WMk5QSDqbGiIjJB4pjY4OjxRHCEfIY6QkATHh8gCI-AgMgASCQgKbIiMeJR8NkY8PkyLJCUmIEWSkxAAgsmIAFlk5QOkpCSygdISZNlJUNFhEmyoaIi0jRZWWFpIiywtJCVFlpISkzLLi8ZLCdll4yTlpR_zAyNDZUUUY3F3-YmgsoqoujnF_MjZRN1Y4SBj3maoqqykknIy_zRRFzhSGEo635qjI6QkpR2NXc2Nzg5OjsbqpudIh4OHc4OhtFHD2znKIioZ8OlU6HEM_m52eHp8fj0VPD9BHxuen48hD8nPkFCQCAKn4-gAVAAYKgoACJ0JAIAEioZCgUVEQ0EhM6KhjpChb9GSEo7Tks8Il-jpQ0lp5Eez9IO0s8UD0j16SnJ6gmHxIv0pLIj1MIz8fpZ6Rn6aPK9MTSVCJkAXpqETIBBr05QTD5NQSVXp6YSJpKhS9QPk1BQiY_qJwMHSmNpbvUlMnRShMQzepopQhjqb71RWUjlTTkQnd6qpDKmTp6Lb1Y5U0RFUCjfq6ytmq-uIxSv1hbFVxgKUffrJquIzCjpBVr1pfYGFdSStfra4Uo66VJS_XEcqSl4aS1eurxYnlqYr15PLUwkTdevsK6krycWK9gXSteLE_XsKSvJyeoFr_YjETNGQWXFF3sbIXKpeuqTvZFUvUhleU_eys7GZsi-qFzvZmMUZC5gVfezmbIqKrCrF__aGpsboyJfm8w_7S2CETGmD-4GN_am6Jb45wgDL3tcZGx0VAuJn_2yJMHCKMoJyNN-2vz_AQME5mt3bm9wcXJzNqq3uT46G93cHI2fTd1OLO4vj69uxzVXI3e3c6m7m6Ors7ncVdHd5PJu6u529Hh7J3Z5eng-iruePB_BXhBQIK8vCDJ3p4PkFCor2iPCHRXx7eUSzvr2coj0i79-gIJzhoN0Rt-_wRrBw6M6o8_gHODdIh1SNfAw0PEQjsk7-Cg0Z1hEh3Sp_BuqQ7wp2l6-EhU56UHhMl8K9KDwfJuvhoiEdoV5TtfDwiTCpz0ny-IdoV5elC_xLgZOUWbQaj74qLVH1WhHtSt8W-qz2cwqn74yOinGLhnxU98bFGcWqQ76q2-OcYt8fYhW38fIybbLyj8r7-Qkw-UmFd_WN_Itso_TL_ALOvkpeYmZWBWt_Jyiu_yqzBLe_lH9ZgpY1g1zXyssvw7DCLuvlodhhEmFXtfLzMrAy0Mv6-YlVqWX4dg18zAy0NDxDD_5ppDGycEJSJYvfNzjLGs8rFMfvnI1nijOWi2T3zs_Ntc5LxjL756bDZxlmI1m98-1zkZGzMczg~_9%20factorial%20cage~R4C7~R5C7~R5C6~R6C6~R6C7~R6C8~R5C8~R7C8~R8C8~~R1C8~R1C7~R1C6~R1C5~R2C5~R3C5~R3C4~R4C4~R4C3~~R1C3~R1C2~R2C2~R2C3~R3C2~R4C2~R4C1~R3C1~R5C1
.NFA~YgAgF_wAAgGBAKBgOCASAQD_wEBAMCIPAniqgV_wGBgTAoQCnkqwX_wICIEqoSq3mrAZ_wLB4RCYVA3orQb_wNAgUq4GDHqrgdvwO8Xk83o9VeD_-CFUq1YrVcr1gEP-CQUCwYDQcDwgEf-CgYDggo08jSMEn-CwcEU8pAkjiP_wYEE8RlKR0eSAn_wao1IpVMn0gSQo_wcngkR0-E0iSt-D0ajkekEiSwr_wgRiOSCSSiWTAs2wiEgmFAqFm2EgmFiCOQu2wmFguQh0GG2FCCQiGOwymwqOR0Ow02wsFwwGQ0G22FwwGxoLA42wwGw4NRaHW2GRoNRsLg8mw0LBaLg-Ww2HA6Hg-Uw4HROICiHRQIS2HhOKBSIg2HxAIREExAIRGERCJA2IhGJBKExGJBMERIAQWJRMAQGJgCUxOKBUIyiKBWJCWKRUKxKQxUKxMQRWAU2LBaHxeIE2LQ-IBgIU2LheMBiIk2LxgIhkI02MBEIxmJEWMRkMxKixkMxKJkWMxKJgC2xoNQ8NxeJ22NQ8JxwMBQyxsNxwMRSyxuOBSMhUyxwKRUMxWmxyOg0PBYmx0GhYPRamx2PB6Phcmx4PRcPxemx6LheQBgix8PyAMUWPyAMRkiyAMRkM22QSEGSIPBo2yEGRoRR6NWWQyIRR8NmWRCKNh-N2WRRsNyAOP-RiQSiYhkCcCaF3-RyUFkChwucSd_yQTECTUQTjkTwx_yShkOiESgjmUAy_yUgQuTkEGDoUd-SzgcTkczoUg1fyYTScTygUSkG7uTSeUTSZCmHD-TiiGzIag4VKqTzIayqHb-UDSajWbDKVg8dyiZA4ZQ6V5-UimVCqViuH5uUyqVy6WBAPyoVw-WC8IIqVSwXxDPysXS8XzAWRENyuWBAWRCFSwIS0NyyWhGWxIFS0JC4Jy2XBMAQKXADNy6XyyYS0Ix-XiyIi0YhHFS-WjGJJeYDCYjGWxLJzCYy2XBMLzEWxKXBNBTGXACVTIHTMWDuZTMJzOKCyVTMKDQWjOZzQKhWWyKaBWXLuaTWZTaZi6Jz-ajKHjMbhOXqqazMby-KLebDabjeZzAKbObTeZzQYRUbzcZxSaBUYqKbzQYxXvzgcjoUj0dSmLF-cToGjqexYVN-cikdSmfCoVRbvzmej2fD6disLl-dDqLCodhaV1-dSoLSudw-WF-djuLy8eBgWV-dy8MCyeREWleeDyMjEMy2rzyYhmWxKXN-ej4disfjuXRevz2dhcdz-Ly9vz4VjuXUAXi-MNefT8f0AeDAMdefkAeDAeTCMlefzwMTyMjFr0AYDyYTEYxm_0CTgwUUGGzqZH-gkGNDUhBqdjK_0GahqZUKHjuZnehEKNzcODwZ3ehTcODOKTyaP-hkQgigikGejSNH-h0EGUGixoezV_0QUEGaUYaj4axr70SikWjEIfTYNveikYhDYhT8bRu70WhBshRufzd70YbEKbTcgDeON-jUekSWl0kcByv0ckQqkkwOTjv0eS0kcEycTkOt-kEumEymkmcx2v0ikhycUmOjov0kcR0dEoGjqv0mlB4e0qPTsv0oex6dksLjur0qlh-fyAeFelj-QDwMTzv0umUmc02lD0PF-mEmO0onB4e9-mTmlD0nT2fB7r00m04nUqfR9r02nUqfUsfh-r04lR8lh-f9enT6lj8f0AQH-niOEyUoAskkC_0-oCCh1CQkmgn-oEOQkEogylEG71CoiIiyKlUI71EiyKhBslkL_1GpU-SVOoEuhiC_1InwooFQQUwh_-pSSoEMqUOmUQQveplOqFSoU0iSH71OqVCiVEm0URHeqFCQ1ERE4i_eqUSokUi06jCL_1UrFcsHU5WosSN_1Wrgg5XWRmqsiP_1YsHKsXYsmssyR_1a6nW7Ha5mutCT_1c5SMsnMSGwtSVv1e1Gq1mu2FsS7-sFislmtFqtiZd1is1qzWQtybf1ktSYyGcTVwTqqs2Qz1yT7-tGazme0GSuihd1qyCaySeuyjP1st1wuV0uylN1uuV2wV4U5-uF2Ul4wimVIquV4wyrP10wWEw2IvStN12vCmvSqV4qvCqvixN16vi6vy-WYqvi-wC1J1-wDCYy3BWAYy5N2Cw16xV8XZ-wl6Vl8xi6Xoqw18xy_L2IxWMx1-YJOxWOv2AYZexl-YGAYTFBWOwDHVWQT2UvDJd2SyjSyzWvTLVWUa2YvjNZ2WzDab1-Z6KzDewDRd2az2S0WUwTTf2cySgymkaWEaqqz2U02Ga7e0Gi0mmy2IbLO0Wmy2YxTbb2kyzYzDaxjdRWmzGOb9-1Gs2Fs3mytzhv2q2CW2W-cFwcd-1ls2Vu4FwuTlv2u3m-4HC2l0c9-2GycFw2jkuzpv2yuDku22Ul4dd-2m2emE3D4vTtv22wj4vW6Vl8d9e3G6fmMgF-eNe3WMgF-YGAed-3nA2l04m2wT1v2-2jm23GemEe9-4F022C5GEwz5r3C4nG5G4xD7r3E5G4xG6xT9r3G3D63T8xj_r3IxG6xWMx0B_3KsiQtXOTGyyED_3M50MznQiG0yUF_3OzkQyXSUG2ykH73Q6UU0kY3GWhPe6WkjGWbG6zEL_3U7HMtHc528zUN_3W5iS53ehm-zkP_3YtHOzXgznAz0R73a7ne8HQ4Wgife7ng6Gg6XE0UV73e6ES6UU42ki_e8Gg6Wi0nI00Zv3i83qr329mojd-8nqD3s_Ea1Udv3mr3s1H61Wsj9-9H2_H6_nu10hv3q9ka1Xuj2wkd-9mqj2w-CW2Ulv3u-Eu33ymW0k9--G-mW0-jm20pr3y-k24063Err304063D63Utv32_Xu13--G8l9-_HukHxAEu30xv3613w3oC33Amde_n_AIC-XCmte_4C-XC-nEm9fAHymn0m3GnNfAXC-nE43Inf_AlWDFdBAg9nKnv_A4Io3XBVK93Mn__BHWpXNBiS-HOoPfBYMp3eqXy6FD74M71S6ES-nSov_B4TA1bC4I-3Uo__CIGDYJDFG_HWpP_CVbBHVDXW_XYpffCoXDIbBX87VN74XDYK7YM_3cp_fDIKpoMp4A71R74a7YM7nfAXgqQ~_10%20factorial%20cage~R8C1~R8C2~R8C3~R9C1~R9C2~R9C3~R9C4~R9C5~R9C6~R9C7